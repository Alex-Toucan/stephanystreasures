---
import Card from './Card.astro';
import products from '../../public/data/products.json';

import '../styles/tabs.css';

// Sort products A â†’ Z by name
products.sort((a, b) => a.name.localeCompare(b.name));

// Extract unique categories (force Antiques to exist)
const categories = ["All", "Home Decor", "Jewelry", "Antiques"];
---

<div class="px-0 my-5">

  <!-- Category Pills -->
  <div class="d-flex flex-column flex-md-row justify-content-between align-items-md-center gap-3 mb-4">
    <ul class="nav nav-pills category-pills flex-wrap gap-2 gap-sm-4 mb-0 col-9 justify-content-center justify-content-md-start" id="category-tabs">
      {categories.map(cat => (
        <li class="nav-item">
          <button 
            class={`nav-link ${cat === "All" ? "active" : ""}`} 
            data-category={cat}
          >
            {cat}
          </button>
        </li>
      ))}
    </ul>

    <div class="input-group search-group">
      <span class="input-group-text">
        <i class="bi bi-search"></i>
      </span>
      <input class="form-control" type="search" placeholder="Search" aria-label="Search" id="searchInput">
    </div>
  </div>

  <!-- Empty State Message -->
  <div id="empty-message" class="text-center text-muted fs-5 my-4">
    <i class="bi bi-emoji-frown-fill fs-1 mb-3"></i>
    <p>No products found in this category.</p>
  </div>

  <!-- Product Grid -->
  <div class="row g-4" id="product-grid">
    {products.map(product => (
      <div 
        class="col-12 col-sm-6 col-md-4 col-lg-3 product-card fade-card" 
        data-category={product.category}
      >
        <Card product={product} />
      </div>
    ))}
  </div>
</div>

<script src="/scripts/tabs.js" is:inline></script>
<script src="/scripts/search.js" is:inline></script>